import{$ as xe,Aa as ae,Ba as F,Ca as T,D as l,Da as h,E as f,Ea as A,F as d,Fa as V,G as p,Ga as we,H as E,Ha as j,I as a,Ia as N,J as o,Ja as q,K as g,Ka as R,L as I,La as Te,M as x,Ma as Ae,N as u,Na as ee,O as P,P as s,Pa as k,Q as L,Qa as De,R as H,S as ue,T as fe,U as ge,V as ve,X as J,Y as _e,Z as he,_ as B,a as pe,aa as oe,ba as w,ga as Ce,ha as Se,ia as _,ja as be,ka as ye,la as Ie,o as ce,q as Z,r as Q,sa as K,t as re,ta as Ee,u as v,ua as M,v as Y,va as X,w as de,wa as Pe,y as b,z as y}from"./chunk-MZDRLKUB.js";import{a as se,b as me}from"./chunk-GAL4ENT6.js";var D=function(e){return e.Danger="Danger",e.Warning="Warning",e.Success="Success",e}(D||{});var S=(()=>{let t=class t{constructor(){this.alert$=new pe}success(i){this.alert$.next({type:D.Success,text:i})}warning(i){this.alert$.next({type:D.Warning,text:i})}danger(i){this.alert$.next({type:D.Danger,text:i})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac});let e=t;return e})();var Be=(e,t,r)=>({"alert-danger":e,"alert-warning":t,"alert-success":r});function We(e,t){if(e&1&&(a(0,"div",1)(1,"div",2)(2,"p"),s(3),o()()()),e&2){let r=u();l(),p("ngClass",he(2,Be,r.type===r.AlertType.Danger,r.type===r.AlertType.Warning,r.type===r.AlertType.Success)),l(2),L(r.text)}}var Le=(()=>{let t=class t{constructor(i){this.alertService=i,this.delay=5e3,this.type=D.Success,this.AlertType=D}ngOnInit(){this.alertSubscription=this.alertService.alert$.subscribe(i=>{this.text=i.text,this.type=i.type;let n=setTimeout(()=>{this.text="",clearTimeout(n)},this.delay)})}ngOnDestroy(){this.alertSubscription&&this.alertSubscription.unsubscribe()}};t.\u0275fac=function(n){return new(n||t)(f(S))},t.\u0275cmp=v({type:t,selectors:[["app-alert"]],inputs:{delay:"delay"},decls:1,vars:1,consts:[["class","alert__wrapper",4,"ngIf"],[1,"alert__wrapper"],[1,"alert","alert__alert-message",3,"ngClass"]],template:function(n,m){n&1&&d(0,We,4,6,"div",0),n&2&&p("ngIf",m.text)},dependencies:[Ce,_],styles:[".alert__wrapper[_ngcontent-%COMP%]{max-width:400px;position:fixed;top:55px;right:10px}.alert__alert-message[_ngcontent-%COMP%]{border-radius:10px}"]});let e=t;return e})();var ze=()=>["/"],Ue=()=>["/admin","dashboard"],Ze=()=>["/admin","create"];function Qe(e,t){if(e&1){let r=I();a(0,"ul")(1,"li",4)(2,"a",1),s(3,"Main"),o()(),a(4,"li",4)(5,"a",1),s(6,"Create"),o()(),a(7,"li")(8,"a",5),x("click",function(n){b(r);let m=u();return y(m.logout(n))}),s(9,"Logout"),o()()()}e&2&&(l(2),p("routerLink",J(2,Ue)),l(3),p("routerLink",J(3,Ze)))}var Fe=(()=>{let t=class t{constructor(i,n){this.router=i,this.authService=n}logout(i){i.preventDefault(),this.authService.logout(),this.router.navigate(["/admin","login"])}};t.\u0275fac=function(n){return new(n||t)(f(M),f(k))},t.\u0275cmp=v({type:t,selectors:[["app-admin-layout"]],decls:8,vars:3,consts:[[1,"navbar","bg-primary"],[3,"routerLink"],[4,"ngIf"],[1,"container"],["routerLinkActive","active"],["href","#",3,"click"]],template:function(n,m){n&1&&(a(0,"nav",0)(1,"h1")(2,"a",1),s(3,"Angular Admin"),o()(),d(4,Qe,10,4,"ul",2),o(),g(5,"app-alert"),a(6,"div",3),g(7,"router-outlet"),o()),n&2&&(l(2),p("routerLink",J(2,ze)),l(2),p("ngIf",m.authService.isAuthenticated()))},dependencies:[_,Ee,X,Pe,Le]});let e=t;return e})();var ne=class{static email(t){return/[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}/.test(t.value)?null:{email:!0}}};function Ye(e,t){if(e&1&&(a(0,"div",14),s(1),o()),e&2){let r=t.ngIf;l(),H(" ",r," ")}}function He(e,t){if(e&1&&(a(0,"div",15),s(1),o()),e&2){let r=u(2);l(),H(" ",r.message," ")}}function Je(e,t){e&1&&(a(0,"small"),s(1," Email is required. "),o())}function Ke(e,t){if(e&1&&(a(0,"small"),s(1),o()),e&2){let r,i=u(4);l(),H(" Email ",(r=i.form.get("email"))==null?null:r.value," is incorrect. ")}}function Xe(e,t){if(e&1&&d(0,Ke,2,1,"small",18),e&2){let r,i=u(3);p("ngIf",(r=i.form.get("email"))==null||r.errors==null?null:r.errors.email)}}function et(e,t){if(e&1&&(a(0,"div",16),d(1,Je,2,0,"small",17)(2,Xe,1,1,"ng-template",null,1,w),o()),e&2){let r,i=P(3),n=u(2);l(),p("ngIf",(r=n.form.get("email"))==null||r.errors==null?null:r.errors.required)("ngIfElse",i)}}function tt(e,t){e&1&&(a(0,"small"),s(1," Password is required. "),o())}function it(e,t){if(e&1&&(a(0,"small"),s(1),o()),e&2){let r,i=u(4);l(),ue(" Password's length must be at least ",(r=i.form.get("password"))==null||r.errors==null?null:r.errors.minlength.requiredLength," symbols. Currently is ",(r=i.form.get("password"))==null||r.errors==null?null:r.errors.minlength.actualLength," symbols. ")}}function nt(e,t){if(e&1&&d(0,it,2,2,"small",18),e&2){let r,i=u(3);p("ngIf",(r=i.form.get("password"))==null||r.errors==null?null:r.errors.minlength)}}function rt(e,t){if(e&1&&(a(0,"div",16),d(1,tt,2,0,"small",17)(2,nt,1,1,"ng-template",null,2,w),o()),e&2){let r,i=P(3),n=u(2);l(),p("ngIf",(r=n.form.get("password"))==null||r.errors==null?null:r.errors.required)("ngIfElse",i)}}function ot(e,t){if(e&1){let r=I();a(0,"form",4),x("ngSubmit",function(){b(r);let n=u();return y(n.submit())}),a(1,"h2"),s(2,"Login to the Admin Panel"),o(),d(3,Ye,2,1,"div",5),B(4,"async"),d(5,He,2,1,"div",6),a(6,"div",7)(7,"label",8),s(8,"Email"),o(),g(9,"input",9),d(10,et,4,2,"div",10),o(),a(11,"div",7)(12,"label",11),s(13,"Password"),o(),g(14,"input",12),d(15,rt,4,2,"div",10),o(),a(16,"button",13),s(17,"Login"),o()()}if(e&2){let r,i,n,m,c=u();p("formGroup",c.form),l(3),p("ngIf",xe(4,12,c.authService.error$)),l(2),p("ngIf",c.message),l(),E("invalid",((r=c.form.get("email"))==null?null:r.touched)&&((r=c.form.get("email"))==null?null:r.invalid)),l(3),p("formControl",c.getControl("email")),l(),p("ngIf",((i=c.form.get("email"))==null?null:i.touched)&&((i=c.form.get("email"))==null?null:i.invalid)),l(),E("invalid",((n=c.form.get("password"))==null?null:n.touched)&&((n=c.form.get("password"))==null?null:n.invalid)),l(3),p("formControl",c.getControl("password")),l(),p("ngIf",((m=c.form.get("password"))==null?null:m.touched)&&((m=c.form.get("password"))==null?null:m.invalid)),l(),p("disabled",c.form.invalid||c.submitted)}}function at(e,t){e&1&&(a(0,"div",19),s(1," You have already logged in. "),o())}var Ve=(()=>{let t=class t{constructor(i,n,m,c){this.fb=i,this.router=n,this.route=m,this.authService=c,this.submitted=!1}ngOnInit(){this.route.queryParams.subscribe(i=>{i.loginRequired?this.message="Please, login first.":i.authFailed&&(this.message="Authentication failed. Session is expired or email/password is incorrect.")}),this.form=this.fb.group({email:["",[h.required,ne.email]],password:["",[h.required,h.minLength(6)]]})}getControl(i){return this.form.get(i)}submit(){if(this.form.invalid)return;this.submitted=!0;let i=this.form.value;this.authService.login(i).subscribe({next:()=>{this.form.reset(),this.router.navigate(["/admin","dashboard"]),this.submitted=!1},error:()=>{this.submitted=!1}})}};t.\u0275fac=function(n){return new(n||t)(f(R),f(M),f(K),f(k))},t.\u0275cmp=v({type:t,selectors:[["app-login-page"]],decls:3,vars:2,consts:[["loggedInAlert",""],["emailValidation",""],["minLengthValidation",""],["class","login-page__form card",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[1,"login-page__form","card",3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"form-control"],["for","email"],["id","email","type","email",3,"formControl"],["class","validation",4,"ngIf"],["for","password"],["id","password","type","password",3,"formControl"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"],[1,"alert","alert-info"],[1,"validation"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"alert","alert-white","text-center"]],template:function(n,m){if(n&1&&d(0,ot,18,14,"form",3)(1,at,2,0,"ng-template",null,0,w),n&2){let c=P(2);p("ngIf",!m.authService.isAuthenticated())("ngIfElse",c)}},dependencies:[_,j,T,A,V,N,q,be],styles:[".login-page__form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]});let e=t;return e})();var O=Object.freeze({postRemoveDangerMessage:"The post have been removed!",postCreateSuccessMessage:"The post have been successfully created!",postUpdateSuccessMessage:"The post have been successfully updated!"});var je=(()=>{let t=class t{transform(i,n=""){return n.trim()?i.filter(m=>m.title.toLowerCase().includes(n.toLowerCase())):i}};t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=de({name:"searchPosts",type:t,pure:!0});let e=t;return e})();var st=e=>["/admin","post",e,"edit"];function mt(e,t){if(e&1){let r=I();a(0,"tr")(1,"td"),s(2),o(),a(3,"td"),s(4),o(),a(5,"td"),s(6),o(),a(7,"td"),s(8),B(9,"date"),o(),a(10,"td")(11,"button",5),s(12," Open "),o(),a(13,"a",6),x("click",function(){let n=b(r).$implicit,m=u(2);return y(m.remove(n.id))}),s(14,"Remove"),o()()()}if(e&2){let r=t.$implicit,i=t.index;l(2),L(i+1),l(2),L(r.author),l(2),L(r.title),l(2),L(oe(9,5,r.date,"medium")),l(3),p("routerLink",_e(8,st,r.id))}}function pt(e,t){if(e&1){let r=I();a(0,"div")(1,"div",2)(2,"input",3),ve("ngModelChange",function(n){b(r);let m=u();return ge(m.searchPostTitle,n)||(m.searchPostTitle=n),y(n)}),o()(),a(3,"table")(4,"thead")(5,"tr")(6,"th"),s(7,"#"),o(),a(8,"th"),s(9,"Author"),o(),a(10,"th"),s(11,"Title"),o(),a(12,"th"),s(13,"Date"),o(),a(14,"th"),s(15,"Action"),o()()(),a(16,"tbody"),d(17,mt,15,10,"tr",4),B(18,"searchPosts"),o()()()}if(e&2){let r=u();l(2),fe("ngModel",r.searchPostTitle),l(15),p("ngForOf",oe(18,2,r.posts,r.searchPostTitle))}}function ct(e,t){e&1&&(a(0,"p",7),s(1,"Loading posts..."),o())}var qe=(()=>{let t=class t{constructor(i,n){this.postsService=i,this.alertService=n,this.posts=[],this.searchPostTitle=""}ngOnInit(){this.init()}init(){this.postsSubscription=this.postsService.getAll().subscribe(i=>{this.posts=i})}remove(i){this.deleteSubscription=this.postsService.remove(i).subscribe(()=>{this.init(),this.alertService.danger(O.postRemoveDangerMessage)})}ngOnDestroy(){this.postsSubscription&&this.postsSubscription.unsubscribe(),this.deleteSubscription&&this.deleteSubscription.unsubscribe()}};t.\u0275fac=function(n){return new(n||t)(f(F),f(S))},t.\u0275cmp=v({type:t,selectors:[["app-dashboard-page"]],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"form-control"],["type","text","placeholder","Find post",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[1,"dashboard-page__open","btn","btn-link",3,"routerLink"],[3,"click"],[1,"text-center"]],template:function(n,m){if(n&1&&d(0,pt,19,5,"div",1)(1,ct,2,0,"ng-template",null,0,w),n&2){let c=P(2);p("ngIf",m.posts.length)("ngIfElse",c)}},dependencies:[Se,_,X,T,A,we,ye,je],styles:[".dashboard-page__open[_ngcontent-%COMP%]{margin-right:.5rem}"]});let e=t;return e})();function ut(e,t){e&1&&(a(0,"small"),s(1," Title is required. "),o())}function ft(e,t){if(e&1&&(a(0,"div",9),d(1,ut,2,0,"small",10),o()),e&2){let r,i=u();l(),p("ngIf",(r=i.form.get("title"))==null||r.errors==null?null:r.errors.required)}}function gt(e,t){e&1&&(a(0,"small"),s(1," Author is required. "),o())}function vt(e,t){if(e&1&&(a(0,"div",9),d(1,gt,2,0,"small",10),o()),e&2){let r,i=u();l(),p("ngIf",(r=i.form.get("author"))==null||r.errors==null?null:r.errors.required)}}var Re=(()=>{let t=class t{constructor(i,n,m){this.fb=i,this.postsService=n,this.alertService=m}ngOnInit(){this.form=this.fb.group({text:["",[h.required]],title:["",[h.required]],author:["",[h.required]]})}getControl(i){return this.form.get(i)}submit(){if(this.form.invalid)return;let i={title:this.form.value.title,author:this.form.value.author,text:this.form.value.text,date:new Date};this.postsService.create(i).subscribe(()=>{this.form.reset(),this.alertService.success(O.postCreateSuccessMessage)})}};t.\u0275fac=function(n){return new(n||t)(f(R),f(F),f(S))},t.\u0275cmp=v({type:t,selectors:[["app-create-page"]],decls:19,vars:11,consts:[[1,"create-page__form",3,"ngSubmit","formGroup"],[1,"form-control"],["for","title"],["id","title","type","text",3,"formControl"],["class","validation",4,"ngIf"],[3,"formControl"],["for","author"],["id","author","type","text",3,"formControl"],["type","submit",1,"btn","btn-block","btn-dark",3,"disabled"],[1,"validation"],[4,"ngIf"]],template:function(n,m){if(n&1&&(a(0,"form",0),x("ngSubmit",function(){return m.submit()}),a(1,"h1"),s(2,"Create new post"),o(),a(3,"div",1)(4,"label",2),s(5,"Post title"),o(),g(6,"input",3),d(7,ft,2,1,"div",4),o(),a(8,"div",1)(9,"label"),s(10,"Post content"),o(),g(11,"quill-editor",5),o(),a(12,"div",1)(13,"label",6),s(14,"Post author"),o(),g(15,"input",7),d(16,vt,2,1,"div",4),o(),a(17,"button",8),s(18,"Create new post"),o()()),n&2){let c,$,z,U;p("formGroup",m.form),l(3),E("invalid",((c=m.form.get("title"))==null?null:c.touched)&&((c=m.form.get("title"))==null?null:c.invalid)),l(3),p("formControl",m.getControl("title")),l(),p("ngIf",(($=m.form.get("title"))==null?null:$.touched)&&(($=m.form.get("title"))==null?null:$.invalid)),l(4),p("formControl",m.getControl("text")),l(),E("invalid",((z=m.form.get("author"))==null?null:z.touched)&&((z=m.form.get("author"))==null?null:z.invalid)),l(3),p("formControl",m.getControl("author")),l(),p("ngIf",((U=m.form.get("author"))==null?null:U.touched)&&((U=m.form.get("author"))==null?null:U.invalid)),l(),p("disabled",m.form.invalid)}},dependencies:[_,j,T,A,V,N,q,ee],styles:[".create-page__form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]});let e=t;return e})();function _t(e,t){e&1&&(a(0,"small"),s(1," Title is required. "),o())}function ht(e,t){if(e&1&&(a(0,"div",9),d(1,_t,2,0,"small",10),o()),e&2){let r,i=u(2);l(),p("ngIf",(r=i.form.get("title"))==null||r.errors==null?null:r.errors.required)}}function xt(e,t){if(e&1){let r=I();a(0,"div")(1,"form",2),x("ngSubmit",function(){b(r);let n=u();return y(n.submit())}),a(2,"div",3)(3,"label",4),s(4,"Post title"),o(),g(5,"input",5),d(6,ht,2,1,"div",6),o(),a(7,"div",3),g(8,"quill-editor",7),o(),a(9,"button",8),s(10,"Update"),o()()()}if(e&2){let r,i,n=u();l(),p("formGroup",n.form),l(),E("invalid",((r=n.form.get("title"))==null?null:r.touched)&&((r=n.form.get("title"))==null?null:r.invalid)),l(3),p("formControl",n.getControl("title")),l(),p("ngIf",((i=n.form.get("title"))==null?null:i.touched)&&((i=n.form.get("title"))==null?null:i.invalid)),l(2),p("formControl",n.getControl("text")),l(),p("disabled",n.form.invalid||n.submitted)}}function Ct(e,t){e&1&&(a(0,"p",11),s(1,"Loading post..."),o())}var ke=(()=>{let t=class t{constructor(i,n,m,c){this.fb=i,this.route=n,this.postsService=m,this.alertService=c,this.submitted=!1}ngOnInit(){this.route.params.pipe(ce(i=>this.postsService.getById(i.id))).subscribe(i=>{this.post=i,this.form=this.fb.group({title:[i.title,[h.required]],text:[i.text,[h.required]]})})}getControl(i){return this.form.get(i)}submit(){this.form.invalid||(this.submitted=!0,this.updateSubscription=this.postsService.update(me(se({},this.post),{text:this.form.value.text,title:this.form.value.title})).subscribe(()=>{this.submitted=!1,this.alertService.success(O.postUpdateSuccessMessage)}))}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}};t.\u0275fac=function(n){return new(n||t)(f(R),f(K),f(F),f(S))},t.\u0275cmp=v({type:t,selectors:[["app-edit-page"]],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"ngSubmit","formGroup"],[1,"form-control"],["for","title"],["id","title","type","text",3,"formControl"],["class","validation",4,"ngIf"],[3,"formControl"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"validation"],[4,"ngIf"],[1,"text-center"]],template:function(n,m){if(n&1&&d(0,xt,11,7,"div",1)(1,Ct,2,0,"ng-template",null,0,w),n&2){let c=P(2);p("ngIf",m.form)("ngIfElse",c)}},dependencies:[_,j,T,A,V,N,q,ee]});let e=t;return e})();var G=(()=>{let t=class t{constructor(i,n){this.router=i,this.authService=n}canActivate(i,n){return this.authService.isAuthenticated()?!0:(this.authService.logout(),this.router.navigate(["/admin","login"],{queryParams:{loginRequired:!0}}),!1)}};t.\u0275fac=function(n){return new(n||t)(re(M),re(k))},t.\u0275prov=Z({token:t,factory:t.\u0275fac});let e=t;return e})();var Oe=[{path:"",component:Fe,children:[{path:"",redirectTo:"/admin/login",pathMatch:"full"},{path:"login",component:Ve},{path:"dashboard",component:qe,canActivate:[G]},{path:"create",component:Re,canActivate:[G]},{path:"post/:id/edit",component:ke,canActivate:[G]}]}];var Ge=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Y({type:t}),t.\u0275inj=Q({imports:[ae.forChild(Oe),ae]});let e=t;return e})();var hi=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Y({type:t}),t.\u0275inj=Q({providers:[G,S],imports:[Ie,Ge,Te,Ae,De]});let e=t;return e})();export{hi as AdminModule};
