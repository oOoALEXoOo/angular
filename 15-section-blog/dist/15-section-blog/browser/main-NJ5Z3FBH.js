import{$ as F,A as me,Aa as ee,B as de,Ba as H,C as Q,D as m,E as R,F as w,G as u,I as p,J as c,K as f,O as k,Oa as xe,P as l,Pa as _e,Q as h,Qa as De,W as ue,X as fe,Y as he,_ as b,a as ne,aa as N,b as D,ba as j,c as A,ca as ge,d as v,da as Y,e as re,ea as ve,f as K,fa as Ee,g as Z,h as q,ha as ye,i as P,ia as L,j as S,ja as U,k as oe,ka as V,l as E,la as J,m as se,ma as X,n as ae,na as we,o as y,oa as be,p as pe,pa as Ce,q as O,qa as Ie,r as z,ra as Pe,s as ce,sa as Se,t as T,ta as W,u as d,ua as Te,v as G,va as B,x as le,xa as Me,ya as Oe,za as Re}from"./chunk-MZDRLKUB.js";import{a as ie}from"./chunk-GAL4ENT6.js";var _="Service workers are disabled or not supported by this browser";function ze(t){return K(()=>A(new Error(t)))}var M=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=ze(_);else{let i=Z(e,"controllerchange").pipe(v(()=>e.controller)),n=K(()=>D(e.controller)),r=re(n,i);this.worker=r.pipe(S(I=>!!I)),this.registration=this.worker.pipe(y(()=>e.getRegistration()));let te=Z(e,"message").pipe(v(I=>I.data)).pipe(S(I=>I&&I.type)).pipe(ae());te.connect(),this.events=te}}postMessage(e,o){return this.worker.pipe(E(1),pe(i=>{i.postMessage(ie({action:e},o))})).toPromise().then(()=>{})}postMessageWithOperation(e,o,i){let n=this.waitForOperationCompleted(i),r=this.postMessage(e,o);return Promise.all([r,n]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let o;return typeof e=="string"?o=i=>i.type===e:o=i=>e.includes(i.type),this.events.pipe(S(o))}nextEventOfType(e){return this.eventsOfType(e).pipe(E(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(S(o=>o.nonce===e),E(1),v(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Ge=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,this.pushManager=null,this.subscriptionChanges=new ne,!i.isEnabled){this.messages=P,this.notificationClicks=P,this.subscription=P;return}this.messages=this.sw.eventsOfType("PUSH").pipe(v(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(v(r=>r.data)),this.pushManager=this.sw.registration.pipe(v(r=>r.pushManager));let n=this.pushManager.pipe(y(r=>r.getSubscription()));this.subscription=q(n,this.subscriptionChanges)}requestSubscription(i){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(_));let n={userVisibleOnly:!0},r=this.decodeBase64(i.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return n.applicationServerKey=s,this.pushManager.pipe(y(a=>a.subscribe(n)),E(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));let i=n=>{if(n===null)throw new Error("Not subscribed to push notifications.");return n.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(E(1),y(i)).toPromise()}decodeBase64(i){return atob(i)}};e.\u0275fac=function(n){return new(n||e)(T(M))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Qe=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,!i.isEnabled){this.versionUpdates=P,this.unrecoverable=P;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:i},i)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:i},i)}};e.\u0275fac=function(n){return new(n||e)(T(M))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var Ae=new ce("");function Ye(t,e,o,i){return()=>{if(!(X(i)&&"serviceWorker"in navigator&&o.enabled!==!1))return;let n=t.get(de),r=t.get(Y);n.runOutsideAngular(()=>{let a=navigator.serviceWorker,g=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",g),r.onDestroy(()=>{a.removeEventListener("controllerchange",g)})});let s;if(typeof o.registrationStrategy=="function")s=o.registrationStrategy();else{let[a,...g]=(o.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=D(null);break;case"registerWithDelay":s=ke(+g[0]||0);break;case"registerWhenStable":s=g[0]?q(Fe(t),ke(+g[0])):Fe(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${o.registrationStrategy}`)}}n.runOutsideAngular(()=>s.pipe(E(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:o.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function ke(t){return D(null).pipe(se(t))}function Fe(t){return t.get(Y).isStable.pipe(S(o=>o))}function Je(t,e){return new M(X(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var x=class{};function Ne(t,e={}){return le([Ge,Qe,{provide:Ae,useValue:t},{provide:x,useValue:e},{provide:M,useFactory:Je,deps:[x,Q]},{provide:ge,useFactory:Ye,deps:[me,Ae,x,Q],multi:!0}])}var je=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=d({type:e,selectors:[["app-main-layout"]],decls:5,vars:0,consts:[[1,"navbar","main"],[1,"container"]],template:function(n,r){n&1&&(p(0,"nav",0)(1,"h1"),l(2,"Angular Blog"),c()(),p(3,"div",1),f(4,"router-outlet"),c())},dependencies:[W]});let t=e;return t})();var Xe=t=>["/post",t],Ue=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=d({type:e,selectors:[["app-post"]],inputs:{post:"post"},decls:12,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"btn","btn-dark",3,"routerLink"]],template:function(n,r){n&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),l(3),c(),p(4,"small"),l(5),b(6,"date"),c()(),p(7,"div")(8,"small"),l(9),c()(),p(10,"button",2),l(11,"Open"),c()()),n&2&&(m(3),h(r.post.title),m(2),h(N(6,4,r.post.date,"dd.MM.yyyy")),m(4),h(r.post.author),m(),u("routerLink",he(7,Xe,r.post.id)))},dependencies:[B,V]});let t=e;return t})();function it(t,e){if(t&1&&f(0,"app-post",4),t&2){let o=e.$implicit;u("post",o)}}function nt(t,e){if(t&1&&(p(0,"div",2),w(1,it,1,1,"app-post",3),c()),t&2){let o=e.ngIf;m(),u("ngForOf",o)}}function rt(t,e){t&1&&(p(0,"p",5),l(1,"Loading posts..."),c())}var Ve=(()=>{let e=class e{constructor(i){this.postsService=i}ngOnInit(){this.posts$=this.postsService.getAll()}};e.\u0275fac=function(n){return new(n||e)(R(H))},e.\u0275cmp=d({type:e,selectors:[["app-home-page"]],decls:4,vars:4,consts:[["loading",""],["class","posts",4,"ngIf","ngIfElse"],[1,"posts"],[3,"post",4,"ngFor","ngForOf"],[3,"post"],[1,"text-center"]],template:function(n,r){if(n&1&&(w(0,nt,2,1,"div",1),b(1,"async"),w(2,rt,2,0,"ng-template",null,0,j)),n&2){let s=k(3);u("ngIf",F(1,2,r.posts$))("ngIfElse",s)}},dependencies:[ye,L,Ue,U],styles:[".posts[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]});let t=e;return t})();var ot=()=>["/"];function st(t,e){if(t&1&&(p(0,"div")(1,"div",2)(2,"div",3)(3,"h1",4),l(4),c(),p(5,"button",5),l(6,"To home "),c()(),p(7,"div",6)(8,"strong",7),l(9),c(),p(10,"small",8),l(11),b(12,"date"),c()(),p(13,"div"),f(14,"quill-view-html",9),c()()()),t&2){let o=e.ngIf;m(4),h(o.title),m(),u("routerLink",fe(8,ot)),m(4),h(o.author),m(2),h(N(12,5,o.date,"medium")),m(3),u("content",o.text)}}function at(t,e){t&1&&(p(0,"p",10),l(1,"Loading post..."),c())}var We=(()=>{let e=class e{constructor(i,n){this.route=i,this.postsService=n}ngOnInit(){this.post$=this.route.params.pipe(y(i=>this.postsService.getById(i.id)))}};e.\u0275fac=function(n){return new(n||e)(R(Se),R(H))},e.\u0275cmp=d({type:e,selectors:[["app-post-page"]],decls:4,vars:4,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"post"],[1,"post__header"],[1,"post__title"],[1,"btn","btn-link",3,"routerLink"],[1,"post__info"],[1,"post__author"],[1,"post__date"],[3,"content"],[1,"text-center"]],template:function(n,r){if(n&1&&(w(0,st,15,9,"div",1),b(1,"async"),w(2,at,2,0,"ng-template",null,0,j)),n&2){let s=k(3);u("ngIf",F(1,2,r.post$))("ngIfElse",s)}},dependencies:[L,B,xe,U,V],styles:[".post__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.post__info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.post__author[_ngcontent-%COMP%]{margin-right:2rem}"]});let t=e;return t})();var Be=[{path:"",component:je,children:[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:Ve},{path:"post/:id",component:We}]},{path:"admin",loadChildren:()=>import("./chunk-FKN4UQHG.js").then(t=>t.AdminModule)}];var He=(()=>{let e=class e{constructor(i,n){this.router=i,this.authService=n}intercept(i,n){let r=i.clone();return this.authService.isAuthenticated()&&(r=i.clone({setParams:{auth:this.authService.token}})),n.handle(r).pipe(oe(s=>(s.status===401&&(this.authService.logout(),this.router.navigate(["/admin","login"],{queryParams:{authFailed:!0}})),A(()=>s))))}};e.\u0275fac=function(n){return new(n||e)(T(Te),T(_e))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var $e=Object.freeze({provide:we,useClass:He,multi:!0});var Ke={providers:[$e,ve({eventCoalescing:!0}),Oe(Be,Re(Me)),be(Ie(),Ce()),Ne("ngsw-worker.js",{enabled:!Ee(),registrationStrategy:"registerWhenStable:30000"})]};var Ze=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=z({imports:[J,ee,De,J,ee]});let t=e;return t})();var qe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=d({type:e,selectors:[["app-root"]],standalone:!0,features:[ue],decls:1,vars:0,template:function(n,r){n&1&&f(0,"router-outlet")},dependencies:[Ze,W]});let t=e;return t})();Pe(qe,Ke).catch(t=>console.error(t));
